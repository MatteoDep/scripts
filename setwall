#!/bin/sh

wallfile="$HOME/.local/share/wallpaper"

# just refresh wallpaper
if [ "$1" = "--refresh" ]; then
    img=$(cat "$wallfile")
    printf "wallpaper --zoom $img"
    xwallpaper --zoom "$img"
    exit
fi

# get argument
[ -f "$1" ] && img="$1" || {
    [ -d "$1" ] && dir="$1" || dir="$HOME"/media/wallpapers
    img=$(get-rand-img "$dir")
}
echo "$img"

echo "$(realpath "$img")" >"$wallfile" && setwall --refresh
